jQuery(function($){$(".lws_editlist .lws_woorewards_system_master .lws_wre_system_selected_item_info").on("reinit",function(){var infodiv=$(this);var master=infodiv.closest(".lws_woorewards_system_master");master.find(".lws_wre_system_selector_item").removeClass("selected");master.attr("style","");var info=infodiv.data("info");if(undefined!=info){info=lwsBase64.toObj(info);infodiv.find(".icon").removeClass().addClass("icon lws-icons "+info["icon"]);infodiv.find(".desc-title").html(info["label"]);infodiv.find(".desc").html(info["short"]);infodiv.find(".extra").html(info["help"])}setTimeout(function(){infodiv.get(0).scrollIntoView()})});$(".lws_editlist .lws_editlist_modal_form").on("firstpage",function(){var buttons=$(this).find(".lws-editlist-line-btns");buttons.find(".undo").addClass("bt-hidden");buttons.find(".btn-save").prop("disabled",true);var master=$(this).find(".lws_woorewards_system_master");if(master.find(".lws_woorewards_system_type").val().trim().length)buttons.find(".confirm").removeClass("bt-hidden");else buttons.find(".confirm").addClass("bt-hidden")}).on("secondpage",function(){var buttons=$(this).find(".lws-editlist-line-btns");buttons.find(".confirm").addClass("bt-hidden");buttons.find(".btn-save").prop("disabled",false);var master=$(this).find(".lws_woorewards_system_master");if(master.find("input.lws_woorewards_system_id").val().trim().length)buttons.find(".undo").addClass("bt-hidden");else buttons.find(".undo").removeClass("bt-hidden")});$(".lws_editlist").on("click",".lws_editlist_popup_group_fold",function(){var button=$(this).find(".group-fold");if(button.hasClass("lws-icon-minus")){button.removeClass("lws-icon-minus").addClass("lws-icon-plus");$(this).next().css("display","none")}else{button.removeClass("lws-icon-plus").addClass("lws-icon-minus");$(this).next().css("display","grid")}});$(".lws_editlist").on("selected",".lws_wre_system_selector_item[value]",function(){var item=$(this);var master=item.closest(".lws_woorewards_system_master");master.find(".lws_wre_system_selector_item").removeClass("selected");item.addClass("selected");var info=item.data("info");if(undefined!=info){info=lwsBase64.toObj(info);master.attr("style","--selected-info-color:"+info["color"]+";--selected-info-color-light:"+info["color"]+"10;");var infodiv=master.find(".lws_wre_system_selected_item_info");infodiv.find(".icon").removeClass().addClass("icon lws-icons "+info["icon"]);infodiv.find(".desc-title").html(info["label"]);infodiv.find(".desc").html(info["short"]);infodiv.find(".extra").html(info["help"])}if(!master.find("input.lws_woorewards_system_id").val().trim().length)master.closest(".lws_editlist_modal_form").find(".lws-editlist-line-btns .confirm").removeClass("bt-hidden");setTimeout(function(){$(".lws_wre_system_selector_item.selected").get(0).scrollIntoView()})});$(".lws_editlist").on("click",".lws_wre_system_selector_item[value]",function(){var item=$(this);var value=item.attr("value");var master=item.closest(".lws_woorewards_system_master");item.trigger("selected");master.find(".lws_woorewards_system_type").val(value)});$(".lws_editlist").on("change",".lws_woorewards_system_type",function(){var master=$(this).closest(".lws_woorewards_system_master").removeClass("initialized");var screens=master.find(".lws_woorewards_system_screens");var choices=master.find(".lws_woorewards_system_choice").hide();var selector=master.find(".lws_woorewards_system_type_select");var value=master.find(".lws_woorewards_system_type").val().trim();if(master.find("input.lws_woorewards_system_id").val().trim().length){master.removeClass("creation").addClass("edition");master.closest(".lws_editlist_modal_form").trigger("secondpage");selector.hide();screens.show();var current=choices.filter("."+value).show();setTimeout(function(){current.find("input:visible, select:visible, textarea:visible").first().focus()},10)}else{master.removeClass("edition").addClass("creation");master.closest(".lws_editlist_modal_form").trigger("firstpage");screens.hide();selector.show();setTimeout(function(){master.find(".lws_woorewards_system_type").focus()},10)}if(value.length)master.find('.lws_wre_system_selector_item[value="'+value+'"]').trigger("selected");else master.find(".lws_wre_system_selected_item_info").trigger("reinit");setTimeout(function(){master.addClass("initialized")},15)});$(".lws_editlist").on("click",".lws-editlist-line-btns .button.confirm",function(event){event.preventDefault();var master=$(this).closest(".lws_editlist_modal_form").find(".lws_woorewards_system_master");var screens=master.find(".lws_woorewards_system_screens");var choices=master.find(".lws_woorewards_system_choice").hide();var selector=master.find(".lws_woorewards_system_type_select");var value=master.find(".lws_woorewards_system_type").val();if(!value)value="";if(value.trim().length)var current=choices.filter("."+value).show();selector.hide();screens.show();master.closest(".lws_editlist_modal_form").trigger("secondpage");if(value.trim().length)setTimeout(function(){current.find("input:visible, select:visible, textarea:visible").first().focus()},10);return false});$(".lws_editlist").on("click",".lws-editlist-line-btns .button.undo",function(event){event.preventDefault();var master=$(this).closest(".lws_editlist_modal_form").find(".lws_woorewards_system_master");var screens=master.find(".lws_woorewards_system_screens");var selector=master.find(".lws_woorewards_system_type_select");screens.hide();selector.show();master.closest(".lws_editlist_modal_form").trigger("firstpage");setTimeout(function(){master.find(".lws_woorewards_system_type").focus()},10);return false})});
